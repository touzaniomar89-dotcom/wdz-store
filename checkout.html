<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WDZâ„¢ | Secure Checkout</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}

body{
background:#0a0a0a;
color:#fff;
display:flex;
justify-content:center;
padding:50px 20px;
}

.container{width:100%;max-width:700px;}

h2{text-align:center;margin-bottom:30px;}

.card{
background:#111;
padding:35px;
border-radius:18px;
box-shadow:0 0 50px rgba(255,0,0,.15);
margin-bottom:30px;
}

.summary{
background:#1a1a1a;
padding:20px;
border-radius:12px;
margin-top:15px;
line-height:1.8;
}

input,select,textarea{
width:100%;
padding:15px;
margin-bottom:18px;
border:none;
border-radius:10px;
background:#1f1f1f;
color:#fff;
font-size:15px;
}

input:focus,select:focus,textarea:focus{
outline:2px solid #ff1e1e;
}

button{
width:100%;
padding:18px;
background:#ff1e1e;
border:none;
border-radius:12px;
color:#fff;
font-weight:700;
font-size:16px;
cursor:pointer;
transition:.3s;
}

button:hover{background:#cc0000;}
button:disabled{background:#555;}

.total{
font-size:20px;
font-weight:800;
color:#ff1e1e;
margin-top:10px;
}

.trust{
text-align:center;
font-size:13px;
opacity:.7;
margin-top:15px;
line-height:1.7;
}

.empty{
text-align:center;
font-size:20px;
margin-top:120px;
}
</style>
</head>

<body>

<div class="container">

<h2>Secure Checkout</h2>

<div id="summary-card" class="card">
<h3>Order Summary</h3>
<div id="order-summary" class="summary"></div>
<div class="total" id="total-price"></div>
</div>

<div class="card">
<h3>Customer Information</h3>

<form id="checkout-form">

<input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
<input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>

<select id="city" required>
<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</option>
<option>Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡</option>
<option>Ø§Ù„Ø±Ø¨Ø§Ø·</option>
<option>Ù…Ø±Ø§ÙƒØ´</option>
<option>ÙØ§Ø³</option>
<option>Ø·Ù†Ø¬Ø©</option>
<option>Ø£ÙƒØ§Ø¯ÙŠØ±</option>
<option>Ø¨Ù†ÙŠ Ù…Ù„Ø§Ù„</option>
</select>

<input type="text" id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„" required>

<select id="quantity">
<option value="1">1 Ù‚Ø·Ø¹Ø©</option>
<option value="2">2 Ù‚Ø·Ø¹ (Ø®ØµÙ… 10%)</option>
<option value="3">3 Ù‚Ø·Ø¹ (Ø®ØµÙ… 20%)</option>
</select>

<select id="color">
<option value="Default">Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ</option>
<option>Ø£Ø³ÙˆØ¯</option>
<option>Ø£Ø­Ù…Ø±</option>
<option>Ø£Ø¨ÙŠØ¶</option>
</select>

<textarea id="note" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø© Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>

<button type="submit" id="submit-btn">Confirm Order</button>

<div class="trust">
ğŸšš ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ 24-72 Ø³Ø§Ø¹Ø©<br>
ğŸ’° Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…<br>
ğŸ”’ ØªØ´ÙÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªÙ‚Ø¯Ù…
</div>

</form>
</div>

</div>

<script>
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const summary = document.getElementById("order-summary");
const totalPrice = document.getElementById("total-price");
const quantitySelect = document.getElementById("quantity");

if(cart.length === 0){
document.body.innerHTML = "<div class='empty'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø©</div>";
}else{
summary.innerHTML =
"<strong>Ø§Ù„Ù…Ù†ØªØ¬:</strong> " + cart[0].name + "<br>" +
"<strong>Ø§Ù„Ø³Ø¹Ø± Ù„Ù„ÙˆØ­Ø¯Ø©:</strong> " + cart[0].price + " MAD";
updateTotal();
}

quantitySelect.addEventListener("change", updateTotal);

function updateTotal(){
let basePrice = parseInt(cart[0].price);
let qty = parseInt(quantitySelect.value);
let discount = 0;

if(qty === 2) discount = 0.10;
if(qty === 3) discount = 0.20;

let total = basePrice * qty;
total = total - (total * discount);

totalPrice.innerText = "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: " + total + " MAD";
}

document.getElementById("checkout-form").addEventListener("submit", function(e){
e.preventDefault();

if(cart.length === 0) return;

const btn = document.getElementById("submit-btn");
btn.disabled = true;
btn.innerText = "Processing...";

let basePrice = parseInt(cart[0].price);
let qty = parseInt(quantitySelect.value);
let discount = (qty === 2) ? 0.10 : (qty === 3) ? 0.20 : 0;
let total = basePrice * qty;
total = total - (total * discount);

const data = {
name: document.getElementById("name").value,
phone: document.getElementById("phone").value,
city: document.getElementById("city").value,
address: document.getElementById("address").value,
quantity: qty,
color: document.getElementById("color").value,
note: document.getElementById("note").value,
product: cart[0].name,
total: total
};

fetch("https://script.google.com/macros/s/AKfycbyjwMU5fAB-_EsshT0JpPqP3RdWzA3mp0KsrN0GUgkh33ujesSP1DFfylfwKSfqa1qIxQ/exec",{
method:"POST",
headers:{"Content-Type":"text/plain;charset=utf-8"},
body:JSON.stringify(data)
})
.then(res=>res.text())
.then(()=>{
localStorage.removeItem("cart");
window.location.href="thankyou.html";
})
.catch(()=>{
alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
btn.disabled=false;
btn.innerText="Confirm Order";
});
});
</script>

</body>
</html>
