<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ | WDZ GLOBAL</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;900&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:'Cairo',sans-serif;
}

body{
  background:#0f0f0f;
  color:white;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}

.checkout-box{
  background:#1a1a1a;
  width:100%;
  max-width:600px;
  padding:40px;
  border-radius:25px;
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 0 40px rgba(0,240,255,0.08);
  animation:fadeIn 0.7s ease;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(30px);}
  to{opacity:1; transform:translateY(0);}
}

h2{
  text-align:center;
  margin-bottom:25px;
  font-weight:900;
}

.summary{
  background:#111;
  padding:20px;
  border-radius:15px;
  margin-bottom:25px;
  border:1px solid rgba(255,255,255,0.05);
}

.summary p{
  margin:5px 0;
  color:#ccc;
}

.summary span{
  color:#00f0ff;
  font-weight:700;
}

form{
  display:flex;
  flex-direction:column;
}

input, select{
  margin-bottom:15px;
  padding:14px;
  border-radius:12px;
  border:none;
  background:#111;
  color:white;
  font-size:15px;
  outline:none;
  transition:0.3s;
}

input:focus, select:focus{
  box-shadow:0 0 10px rgba(0,240,255,0.5);
}

button{
  padding:15px;
  border:none;
  border-radius:40px;
  background:#00f0ff;
  color:black;
  font-weight:800;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  transform:scale(1.05);
  box-shadow:0 0 20px #00f0ff;
}

.secure{
  text-align:center;
  margin-top:15px;
  font-size:13px;
  color:#888;
}
</style>
</head>

<body>

<div class="checkout-box">

<h2>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>

<div class="summary">
  <p>Ø§Ù„Ù…Ù†ØªØ¬: <span id="product-name"></span></p>
  <p>Ø§Ù„Ø³Ø¹Ø±: <span id="product-price"></span></p>
</div>

<form id="order-form">

  <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" required>
  <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
  
  <select id="city" required>
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</option>
    <option>Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡</option>
    <option>Ø§Ù„Ø±Ø¨Ø§Ø·</option>
    <option>Ù…Ø±Ø§ÙƒØ´</option>
    <option>ÙØ§Ø³</option>
    <option>Ø·Ù†Ø¬Ø©</option>
  </select>

  <input type="text" id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„" required>

  <select id="payment" required>
    <option value="">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
    <option>Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
    <option>ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ</option>
  </select>

  <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" 
    style="padding:14px;border-radius:12px;border:none;background:#111;color:white;margin-bottom:15px;resize:none;height:80px;"></textarea>

  <button type="submit">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>

</form>

<div class="secure">
  ğŸ”’ Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø¢Ù…Ù†Ø© ÙˆÙ…Ø´ÙØ±Ø©
</div>

</div>

<script>

const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyjwMU5fAB-_EsshT0JpPqP3RdWzA3mp0KsrN0GUgkh33ujesSP1DFfylfwKSfqa1qIxQ/exec";

const cart = JSON.parse(localStorage.getItem("cart")) || [];

/* Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬ */

if(cart.length === 0){
  document.querySelector(".summary").innerHTML =
    "<p style='color:red;text-align:center'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ø³Ù„Ø©</p>";
}else{
  document.getElementById("product-name").innerText = cart[0].name;
  document.getElementById("product-price").innerText = cart[0].price + " Ø¯Ø±Ù‡Ù…";
}

/* Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ */

document.getElementById("order-form").addEventListener("submit", async function(e){

  e.preventDefault();

  if(cart.length === 0){
    alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
    return;
  }

  const button = this.querySelector("button");
  button.disabled = true;
  button.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";

  const orderData = {
    name: document.getElementById("name").value.trim(),
    phone: document.getElementById("phone").value.trim(),
    city: document.getElementById("city").value,
    address: document.getElementById("address").value.trim(),
    product: cart[0].name
  };

  try{

    const response = await fetch(WEB_APP_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(orderData)
    });

    const result = await response.json();

    if(result.result === "success"){
      localStorage.removeItem("cart");
      window.location.href = "thankyou.html";
    }else{
      throw new Error("Script error");
    }

  }catch(error){

    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
    console.error(error);
    button.disabled = false;
    button.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨";
  }

});

</script>

</body>
</html>
